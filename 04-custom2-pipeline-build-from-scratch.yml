#trigger:
#- master
#
#pool:
#  vmImage: ubuntu-latest
#
#steps:
#- script: echo Hello, world!
#  displayName: 'Run a one-line script'
#
#- script: |
#    echo Add other tasks to build, test, and deploy your project.
#    echo See https://aka.ms/yaml
#  displayName: 'Run a multi-line script'

#####################################################################################
# Stages
# Stage-1:
  # Task-1: Build Docker Image and push to Azure Container Registry ACR
  # Task-2: Copy kube-manifest files to Build Artifact Directory
  # Task-3: Publish build articats to Azure Pipelines
# Pipeline Hierarchial Flow: Stages -> Stage -> Jobs -> Job -> Steps -> Task1, Task2, Task3  

trigger:
- master

stages:
- stage: "Build_Docker_image" 
  displayName: "Build stage"
  jobs:
  - job: "Build_Docker_image"
    displayName: "Build docker image"
    steps:
    - task: Docker@2
      inputs:
        containerRegistry: "manual-benighil-svc"
        repository: 'benighil'
        command: 'buildAndPush'
        Dockerfile: '**/Dockerfile'